var M=Object.defineProperty,E=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var _=(t,a,n)=>a in t?M(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,w=(t,a)=>{for(var n in a||(a={}))q.call(a,n)&&_(t,n,a[n]);if(b)for(var n of b(a))L.call(a,n)&&_(t,n,a[n]);return t},F=(t,a)=>E(t,P(a));var k=(t,a)=>{var n={};for(var r in t)q.call(t,r)&&a.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&b)for(var r of b(t))a.indexOf(r)<0&&L.call(t,r)&&(n[r]=t[r]);return n};var l=(t,a,n)=>(_(t,typeof a!="symbol"?a+"":a,n),n);import{a as Q,j as C,r as m,L as c,R as N,b as p,c as B,S as A,d as I,B as R}from"./vendor.e09ad162.js";const $=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};$();const g=(()=>Q.create({baseURL:"https://awesome-quotes-react-app.heroku.com",withCredentials:!0}))();const e=C.exports.jsx,s=C.exports.jsxs,u=C.exports.Fragment;class v extends m.exports.Component{constructor(){super(...arguments);l(this,"state",{currentUser:!1,isOpen:!1});l(this,"openMenu",a=>{this.setState({isOpen:!this.state.isOpen})})}render(){const a=this.state.isOpen?"menu menu-reveal":"menu";return s("nav",{className:"menu_container",children:[s("div",{className:"menu_container__nav",children:[s("div",{className:"burger",id:"menu_burger",onClick:this.openMenu,children:[e("div",{className:"burger__line burger__line--1"}),e("div",{className:"burger__line burger__line--2"}),e("div",{className:"burger__line burger__line--3"})]}),e(c,{className:"nav-logo",to:"/home",children:e("img",{src:"/images/logo/awesome-quote-logo-inline.png",alt:"Awesome Quotes logo"})}),e(c,{to:"/auth/login",children:s("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{cx:"12.5",cy:"12",r:"12",fill:"#444444"}),e("circle",{cx:"12.5",cy:"12",r:"9.88235",stroke:"#FFFCEC",strokeWidth:"0.705882"}),e("path",{d:"M18.147 17.647V16.2353C18.147 15.4864 17.8495 14.7682 17.32 14.2387C16.7905 13.7092 16.0723 13.4117 15.3235 13.4117H9.67645C8.9276 13.4117 8.20943 13.7092 7.67991 14.2387C7.1504 14.7682 6.85292 15.4864 6.85292 16.2353V17.647",stroke:"#FFFCEC",strokeWidth:"0.705882",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M12.5 10.5882C14.0593 10.5882 15.3235 9.32408 15.3235 7.76469C15.3235 6.2053 14.0593 4.94116 12.5 4.94116C10.9406 4.94116 9.67643 6.2053 9.67643 7.76469C9.67643 9.32408 10.9406 10.5882 12.5 10.5882Z",stroke:"#FFFCEC",strokeWidth:"0.705882",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),e("div",{className:"line-separation"}),s("div",{className:a,id:"menu_page",children:[s("div",{className:"menu__item menu__item--quote-related",children:[this.state.currentUser===!0&&s("div",{className:"menu__item menu__item--account",children:[s("h2",{className:"title",children:["Hello ",e("span",{className:"title",children:"[UserPseudo]"})]}),e("span",{className:"publication-date",children:"a.k.a"}),e("h3",{className:"body-bold",children:"[UserName]"}),e(c,{to:"#",className:"published-by-link",children:"My account"})]}),s(c,{to:"/quotes/create-quote",className:"body-bold",children:[e("img",{src:"./../../../Images/icons/menu-publish-icon.svg",alt:""}),"Publish an Awesome Quote"]}),s(c,{to:"/home/best-quotes",className:"body-bold",children:[e("img",{src:"./../../../Images/icons/menu-best_quotes-icon.svg",alt:""}),"Best quotes"]}),s(c,{to:"/filter",className:"body-bold",children:[e("img",{src:"./../../../Images/icons/menu-filter-icon.svg",alt:""}),"Filter"]})]}),s("div",{className:"menu__item menu__item--legal",children:[e(c,{to:"/about",className:"body",children:"About"}),e(c,{to:"/terms-and-conditions",className:"body",children:"Terms and conditions"}),e(c,{to:"/privacy-policy",className:"body",children:"Privacy policy"})]}),e("div",{className:"menu__item menu__item--log-in",children:e(c,{to:"/auth/login",className:"suggestion-modal",children:"Login"})})]})]})}}function H(t){return e(u,{children:s("div",{className:"quote_header",children:[s("div",{className:"quote_header__infos",children:[s("div",{className:"quote_header__infos--text",children:[e("span",{className:"published-by",children:"Published by: "}),e(c,{to:"/users/"+t.publisher.pseudo,className:"published-by-link",children:t.publisher.pseudo}),s("span",{className:"publication-date",children:["on"," ",e("span",{id:"quote-date",className:"publication-date",children:t.date})]})]}),s("div",{className:"quote_header__infos--kebab",children:[e("div",{className:"kebab-dot"}),e("div",{className:"kebab-dot"}),e("div",{className:"kebab-dot"})]})]}),e("div",{className:"quote_header__hashtags",children:t.hashtags.length!=0&&t.hashtags[0]!=""&&t.hashtags.map((a,n)=>s(c,{to:"#",className:"hashtags",children:["#",a]},n))}),e("div",{className:"line-separation"})]},t.key)})}function O(t){return e(u,{children:e("div",{className:"quote-body",children:t.quote.map((a,n)=>s("div",{className:"quote_atom",children:[e("h2",{className:"title",children:a.user}),e("p",{className:"body",children:a.text})]},n))})})}function D(t){//! const {currentUser} = useAuth()
return s("div",{className:"quote_social",children:[s("div",{className:"quote_social__item quote_social__item--like",children:[s("div",{className:"quote_social-icon quote_social-icon-animate",children:[e("svg",{width:"22",height:"20",viewBox:"0 0 22 20",className:"svg-fill",children:e("path",{d:"M19.5631 2.59133C19.0876 2.08683 18.523 1.68663 17.9016 1.41358C17.2802 1.14054 16.6142 1 15.9415 1C15.2689 1 14.6029 1.14054 13.9814 1.41358C13.36 1.68663 12.7955 2.08683 12.3199 2.59133L11.3331 3.63785L10.3462 2.59133C9.38572 1.57276 8.083 1.00053 6.72464 1.00053C5.36628 1.00053 4.06355 1.57276 3.10305 2.59133C2.14254 3.6099 1.60294 4.99139 1.60294 6.43187C1.60294 7.87235 2.14254 9.25383 3.10305 10.2724L4.08991 11.3189L11.3331 19L18.5763 11.3189L19.5631 10.2724C20.0389 9.76814 20.4162 9.16942 20.6737 8.51045C20.9312 7.85148 21.0637 7.14517 21.0637 6.43187C21.0637 5.71857 20.9312 5.01225 20.6737 4.35328C20.4162 3.69431 20.0389 3.09559 19.5631 2.59133V2.59133Z"})}),e("div",{className:"quote_social-svg-icon svg-animate"}),e("div",{className:"quote_social-svg-icon"}),e("div",{className:"quote_social-svg-icon"})]}),e("span",{className:"social-links",children:"Likes"})]}),s("div",{className:"quote_social__item quote_social__item--share",children:[s("div",{className:"quote_social-icon",children:[s("svg",{width:"16",height:"20",viewBox:"0 0 16 20",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M0.800018 10V17.2C0.800018 17.6774 0.989661 18.1352 1.32723 18.4728C1.66479 18.8104 2.12263 19 2.60002 19H13.4C13.8774 19 14.3353 18.8104 14.6728 18.4728C15.0104 18.1352 15.2 17.6774 15.2 17.2V10"}),e("path",{d:"M11.6 4.6L8 1L4.39999 4.6"}),e("path",{d:"M7.99997 1V12.7"})]}),e("div",{className:"quote_social-svg-icon"})]}),e("span",{className:"social-links",children:"Share"})]}),s("div",{className:"quote_social__item quote_social__item--favorite",children:[s("div",{className:"quote_social-icon quote_social-icon-animate",children:[s("svg",{width:"22",height:"20",viewBox:"0 0 22 20",xmlns:"http://www.w3.org/2000/svg",children:['className="svg-fill"',e("path",{d:"M11 1L14.09 6.92429L21 7.88013L16 12.489L17.18 19L11 15.9243L4.82 19L6 12.489L1 7.88013L7.91 6.92429L11 1Z"})]}),e("div",{className:"quote_social-svg-icon svg-animate"}),e("div",{className:"quote_social-svg-icon"}),e("div",{className:"quote_social-svg-icon"})]}),e("span",{className:"social-links",children:"Favorites"})]})]})}function U(t){return s("div",{className:"quote",children:[e(H,{date:t.data.dateCreatedAt,publisher:t.data.publisher,hashtags:t.data.hashtags}),e(O,{quote:t.data.quotes}),e(D,{})]})}class V extends N.Component{constructor(){super(...arguments);l(this,"state",{quotes:null})}async componentDidMount(){try{const a=await g.get("/api/home");this.setState({quotes:a.data})}catch(a){console.log(a)}}render(){return this.state.quotes?s(u,{children:[e(v,{}),e("div",{children:this.state.quotes.map((a,n)=>e(U,{data:a},n))})]}):e("h1",{className:"title",children:"Loading"})}}function W(){return e(c,{to:"/home",children:s("div",{id:"index-loader",children:[e("img",{src:"./../../../Images/logo/awesome-quote-logo.png",alt:"Awesome Quotes logo"}),e("h1",{className:"body",children:"Fetching the best punchlines and conversations on the Web..."})]})})}function x(t){return e("nav",{className:"menu_container_second",children:e(c,{className:"nav-logo",to:"/home",children:e("img",{src:"./../../../public/Images/logo/awesome-quote-logo-inline.png",alt:"Awesome Quotes Logo inline"})})})}class Y extends N.Component{constructor(a){super(a);l(this,"handleChange",a=>{this.setState({[a.target.name]:a.target.value})});l(this,"handleSubmit",async a=>{a.preventDefault();const{mail:n,password:r,username:i,name:o,image:d}=this.state,y=this.state.image.current.files[0],h=new FormData;h.append("email",n),h.append("password",r),h.append("username",i),h.append("name",o),h.append("image",y);//! to change
try{await g.post("/api/cats",h),this.props.handler()}catch(f){console.error(f)}});this.state={mail:null,password:null,username:null,name:null,image:N.createRef()}}render(){return s(u,{children:[e(x,{}),e("h1",{className:"title",children:"Create an account"}),s("form",{className:"form",children:[s("div",{className:"user-pic",children:[e("input",{ref:this.state.image,className:"pic-input",id:"image",name:"image",type:"file"}),e("img",{src:"./../../../../public/Images/icons/menu-account-icon.svg",alt:""})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"email",children:"Email*"}),e("span",{className:"error-message",children:"Error message if needed"}),e("input",{className:"input",id:"email",name:"name",type:"email",placeholder:"Your email",onChange:this.handleChange,required:!0})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"email",children:"Password*"}),e("span",{className:"error-message",children:"Error message if needed"}),e("input",{className:"input",name:"password",id:"password",type:"password",placeholder:"Choose a password",required:!0})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"username",children:"Your username*"}),e("span",{className:"error-message",children:"Error message if needed"}),e("input",{className:"input",name:"username",id:"username",type:"text",placeholder:"Enter your username",required:!0})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"username",children:"Your name"}),e("span",{className:"error-message",children:"Error message if needed"}),e("input",{className:"input",name:"name",id:"name",type:"text",placeholder:"What is your name?"})]}),e("button",{className:"button--primary",onClick:this.handleSubmit,children:"Create my account"})]})]})}}class T extends m.exports.Component{constructor(){super(...arguments);l(this,"state",{user:null});l(this,"fetchUser",async()=>{try{const a=this.props.match.params,n=await g.get("/api/users/"+a);this.setState({user:n.data.user})}catch(a){console.error(a)}});l(this,"handleChange",a=>{this.setState({[a.target.name]:a.target.value})})}componentDidMount(){this.fetchUser()}render(){return this.state.user?s(u,{children:[e(v,{}),s("div",{id:"update_account-page",children:[e("h1",{className:"title",children:"Update my account"}),s("form",{className:"form",children:[e("a",{href:"",id:"imagePicker",children:e("img",{src:"/images/icons/user-icon.png",alt:"user-icon"})}),e("label",{htmlFor:"textImage"}),e("input",{className:"input",type:"file",id:"textImage",name:"profilePic",onChange:this.handleChange}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"mail",children:"Email*"}),e("input",{className:"input",type:"email",id:"mail",name:"mail",placeholder:"Update your email *",required:!0,value:this.state.user.mail,onChange:this.handleChange})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"password",children:"New Password*"}),e("input",{className:"input",type:"password",id:"password",name:"password",placeholder:"New password *",required:!0,onChange:this.handleChange})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"password-confirm",children:"Confirm password*"}),e("input",{className:"input",type:"password",id:"password-confirm",name:"password-confirm",placeholder:"Confirm new password *",required:!0,onChange:this.handleChange})]}),s("div",{className:"input-container",children:[e("label",{className:"body-bold",htmlFor:"name",children:"Name"}),e("input",{placeholder:"Name",className:"input",name:"name",type:"text",value:this.state.user.name,onChange:this.handleChange})]}),e("span",{className:"span-edit grey",children:"* mandatory fields"}),e("button",{className:"button--primary",children:"Update my account"})]})]})]}):e("h1",{className:"title",children:"Getting infos in database"})}}function Z(t){return s(u,{children:[e(x,{}),e("h1",{className:"title",children:"Create an account"}),e("div",{className:"account-creation-container",children:s("div",{className:"buttons-choice-container",children:[e(c,{className:"button--primary",to:"create-account",children:e("span",{className:"title",children:"Create with email"})}),e("span",{className:"body grey",children:"Or"}),e("img",{src:"./../../../../public/Images/accounts/appleid_button@2x-2.png",alt:"signin with apple"}),e("img",{src:"./../../../../public/Images/accounts/btn_google_signin_light_normal_web@2x.png",alt:"signin with google"})]})})]})}class G extends N.Component{render(){return s(u,{children:[e(x,{}),e("h1",{className:"title",children:"Log in"}),e("div",{className:"login-container",children:s("form",{className:"form",children:[s("div",{className:"input-container",children:[e("label",{htmlFor:"email",className:"body-bold",children:"Email"}),e("input",{type:"text",className:"input",id:"email",placeholder:"Your email"})]}),s("div",{className:"input-container",children:[e("label",{htmlFor:"password",className:"body-bold",children:"Password"}),e("input",{type:"password",className:"input",id:"password",placeholder:"Enter your password"})]}),e("button",{className:"button--primary",children:"Let's go!"}),e("div",{className:"no-account-yet",children:e(c,{to:"/auth/account-creation",className:"body-bold grey",children:"No account yet?"})})]})})]})}}class K extends N.Component{constructor(){super(...arguments);l(this,"state",{user:null,followBtnState:!1});l(this,"fetchUser",async()=>{try{const a=await g.get("/api/users/"+this.props.match.params.pseudo);this.setState({user:a.data})}catch(a){console.log(a)}});l(this,"addUserToFollowings",async()=>{try{const a=await g.get("/api/users/"+this.state.user.user.pseudo);a.data.user.followers=[...a.data.user.followers,"currentUserId"],console.log("Found user followers ======>",a);const n=await g.patch("/api/users/"+this.state.user.user.pseudo+"/edit",{followers:"foundUser.data.user.followers"});console.log(n)}catch(a){console.error(a)}});l(this,"toggleFollow",a=>{this.setState({followBtnState:!this.state.followBtnState},async()=>{await this.addUserToFollowings()})})}async componentDidMount(){this.fetchUser()}render(){if(!this.state.user)return e("p",{className:"body",children:"Loading Bro!"});const{name:a,pseudo:n,profilePic:r,followers:i,following:o,likes:d,favorites:y}=this.state.user.user,h=this.state.followBtnState?"button--primary":"button--secondary";return s(u,{children:[e(v,{}),s("div",{className:"user_profil",id:"user-page",children:[this.state.user.user._id==="617bc435c19b4e77202e3b6f"&&e("h1",{className:"title",children:"My account"}),s("div",{className:"user_main_infos",children:[e("img",{src:r,alt:"User icon",className:"user-icon"}),e("span",{className:"body-bold",children:a}),e("span",{className:"suggestion-modal",children:n})]}),s("div",{className:"user_stats-container",children:[s("div",{className:"user_stats user_stats--liked",children:[e("span",{className:"body-bold",children:d.length}),e("span",{className:"suggestion-modal grey",children:"Liked"})]}),s("div",{className:"user_stats user_stats--saved",children:[e("span",{className:"body-bold",children:y.length}),e("span",{className:"suggestion-modal grey",children:"Saved"})]}),s("div",{className:"user_stats user_stats--followers",children:[e("span",{className:"body-bold",children:i.length}),e("span",{className:"suggestion-modal grey",children:"Followers"})]}),s("div",{className:"user_stats user_stats--followers",children:[e("span",{className:"body-bold",children:o.length}),e("span",{className:"suggestion-modal grey",children:"Following"})]})]}),this.state.user.user._id==="617bc435c19b4e77202e3b6f"?e(c,{to:n+"/edit",children:e("span",{className:"published-by-link",children:"Edit my account"})}):this.state.followBtnState===!1?e("div",{className:h,onClick:this.toggleFollow,children:"Follow"}):e("div",{className:h,onClick:this.toggleFollow,children:"Unfollow"}),e("div",{className:"line-separation"}),this.state.user.user._id==="617bc435c19b4e77202e3b6f"?e("h3",{className:"subtitle",children:"My quotes"}):s("h3",{className:"subtitle",children:[a,"'s quotes"]})]}),this.state.user.listQuotes.map((f,S)=>e(U,{data:f},S))]})}}function z({handleChange:t,i:a}){return e(u,{children:s("div",{className:"ajax-form-by-person",children:[s("div",{className:"ajax_input",children:[e("label",{className:"body-bold",htmlFor:"ajax-input-name",children:"Name"}),e("input",{id:"ajax-input-name",type:"text",name:"user",placeholder:"Enter the name of the person",onChange:n=>{t(n,a)},required:!0})]}),s("div",{className:"ajax_input",children:[e("label",{className:"body-bold",htmlFor:"ajax-input-message",children:"Message"}),e("textarea",{name:"text",id:"ajax-input-message",cols:"30",rows:"5",placeholder:"Enter here your message",onChange:n=>{t(n,a)},required:!0}),e("div",{className:"button--add_person remove-person",children:"Remove this person"})]})]})})}class J extends m.exports.Component{constructor(){super(...arguments);l(this,"state",{publisher:"currentUser",user:[],text:[],hashtags:[],counter:0});l(this,"addPerson",a=>{this.setState({counter:this.state.counter+1})});l(this,"handleChange",(a,n)=>{const r=[...this.state[a.target.name]];r[n]=a.target.value,this.setState({copy:r})});l(this,"handleSubmit",async a=>{a.preventDefault();try{const n=await g.post("/api/create-quote",this.state)}catch(n){console.error(n)}})}render(){let a=Array(this.state.counter).fill(0);return console.log(this.state.text),s(u,{children:[e(v,{}),s("div",{id:"quote-create",children:[e("p",{className:"instructions grey",children:"How to create an Awesome Quote?"}),s("form",{className:"form",children:[e("div",{className:"ajax_form form",children:s("div",{className:"ajax_form_message_container",children:[s("div",{className:"ajax-form-by-person",children:[s("div",{className:"ajax_input",children:[e("label",{className:"body-bold",htmlFor:"ajax-input-name",children:"Name"}),e("input",{id:"ajax-input-name",type:"text",name:"user",placeholder:"Enter the name of the person",onChange:this.handleChange,required:!0})]}),s("div",{className:"ajax_input",children:[e("label",{className:"body-bold",htmlFor:"ajax-input-message",children:"Message"}),e("textarea",{name:"text",id:"ajax-input-message",cols:"30",rows:"5",placeholder:"Enter here your message",onChange:this.handleChange,required:!0})]})]}),a.map((n,r)=>e(z,{handleChange:this.handleChange,i:r},r))]})}),s("div",{className:"ajax_input",id:"ajax-input-hashtag-container",children:[e("label",{className:"hashtags",htmlFor:"ajax-input-hashtag",children:"Hashtags:"}),e("input",{id:"ajax-input-hashtag input",type:"text",name:"hashtags",placeholder:"#",onChange:this.handleChange})]}),s("div",{className:"button-container",children:[e("div",{className:"button--add_person",onClick:this.addPerson,children:"+ Add a person to the conversation"}),e("button",{className:"button--primary",onClick:this.handleSubmit,children:"Publish"})]})]})]})]})}}const j=N.createContext(),X=t=>{const[a,n]=m.exports.useState(null),[r,i]=m.exports.useState(!0);m.exports.useEffect(()=>{g.get("/is-loggedin").then(d=>{i(!1),n(d.data.currentUser)}).catch(()=>{n(null),i(!1)})},[]);const o=Boolean(a);return e(j.Provider,{value:{currentUser:a,isLoading:r,isLoggedIn:o,setCurrentUser:n},children:r?null:t.children})},ee=()=>m.exports.useContext(j),ae=n=>{var r=n,{component:t}=r,a=k(r,["component"]);const{isLoggedIn:i,isLoading:o}=ee();return o?e("div",{children:"Loading..."}):i?e(p,F(w({},a),{render:d=>e(t,w({},d))})):e(B,{to:"/auth/login"})};class se extends m.exports.Component{constructor(){super(...arguments);l(this,"state",{quotes:[]})}render(){return e(X,{children:e("div",{className:"main",children:s(A,{children:[e(p,{exact:!0,path:"/",component:W}),e(p,{path:"/home",component:V}),e(p,{path:"/auth/create-account",component:Y}),e(p,{path:"/auth/account-creation",component:Z}),e(p,{path:"/auth/login",component:G}),e(p,{exact:!0,path:"/users/:pseudo/edit",component:T}),e(p,{path:"/users/:pseudo",component:K}),e(ae,{path:"/quotes/create-quote",component:J})]})})})}}I.render(e(N.StrictMode,{children:e(R,{children:e(se,{})})}),document.getElementById("root"));
